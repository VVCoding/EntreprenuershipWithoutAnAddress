{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/gayatrivohra/Downloads/EntreprenuershipWithoutAnAddress-main/Add-Navbar-Link/site/entrepreneurship-without-address/src/app/pitches/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useSession } from 'next-auth/react';\n\ninterface Pitch {\n  id: string;\n  title: string;\n  description: string;\n  video_url: string;\n  looking_for: string;\n  views: number;\n  created_at: string;\n  user_email?: string;\n}\n\nexport default function PitchesPage() {\n  const router = useRouter();\n  const { data: session } = useSession();\n  const [pitches, setPitches] = useState<Pitch[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [viewedPitches, setViewedPitches] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    fetchPitches();\n  }, []);\n\n  const fetchPitches = async () => {\n    try {\n      const response = await fetch('/api/pitches');\n      if (!response.ok) {\n        throw new Error('Failed to fetch pitches');\n      }\n      const data = await response.json();\n      setPitches(data);\n    } catch (err) {\n      setError('Failed to load pitches. Please try again.');\n      console.error('Error fetching pitches:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const incrementViewCount = async (pitchId: string) => {\n    // Only increment if the user is an investor and hasn't viewed this pitch yet\n    if (session?.user?.userType === 'investor' && !viewedPitches.has(pitchId)) {\n      try {\n        const response = await fetch(`/api/pitches/${pitchId}/views`, {\n          method: 'POST',\n        });\n\n        if (response.ok) {\n          const { views } = await response.json();\n          // Update the pitch's view count in the local state\n          setPitches(prevPitches =>\n            prevPitches.map(pitch =>\n              pitch.id === pitchId ? { ...pitch, views } : pitch\n            )\n          );\n          // Mark this pitch as viewed\n          setViewedPitches(prev => new Set([...prev, pitchId]));\n        }\n      } catch (err) {\n        console.error('Error incrementing view count:', err);\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  const isEntrepreneur = session?.user?.userType === 'entrepreneur';\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold\">\n          {isEntrepreneur ? 'My Pitches' : 'All Pitches'}\n        </h1>\n        {isEntrepreneur && (\n          <Link\n            href=\"/pitches/new\"\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n          >\n            Create New Pitch\n          </Link>\n        )}\n      </div>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n\n      {pitches.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">\n            {isEntrepreneur \n              ? \"You haven't created any pitches yet.\"\n              : \"No pitches available at the moment.\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {pitches.map((pitch) => (\n            <div\n              key={pitch.id}\n              className=\"border rounded-lg p-6 hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex justify-between items-start mb-2\">\n                <h2 className=\"text-xl font-semibold\">{pitch.title}</h2>\n                {!isEntrepreneur && pitch.user_email && (\n                  <span className=\"text-sm text-gray-500\">\n                    By: {pitch.user_email}\n                  </span>\n                )}\n              </div>\n              \n              <div \n                className=\"aspect-w-16 aspect-h-9 mb-4\"\n                onMouseEnter={() => incrementViewCount(pitch.id)}\n              >\n                <iframe\n                  src={pitch.video_url}\n                  className=\"w-full h-full rounded-lg\"\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                ></iframe>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"font-medium text-gray-700\">Description</h3>\n                  <p className=\"text-gray-600\">{pitch.description}</p>\n                </div>\n\n                <div>\n                  <h3 className=\"font-medium text-gray-700\">Looking For</h3>\n                  <p className=\"text-gray-600\">{pitch.looking_for}</p>\n                </div>\n\n                <div className=\"flex justify-between text-sm text-gray-500\">\n                  <span>{pitch.views} views</span>\n                  <span>\n                    Created on {new Date(pitch.created_at).toLocaleDateString()}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///Users/gayatrivohra/Downloads/EntreprenuershipWithoutAnAddress-main/Add-Navbar-Link/site/entrepreneurship-without-address/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}
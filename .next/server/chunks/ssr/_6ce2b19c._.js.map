{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/gayatrivohra/Downloads/EntreprenuershipWithoutAnAddress-main/Add-Navbar-Link/site/entrepreneurship-without-address/src/app/pitches/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { useSession } from 'next-auth/react';\nimport { Play } from 'lucide-react';\n\ninterface Pitch {\n  id: string;\n  title: string;\n  description: string;\n  video_url: string;\n  looking_for: string;\n  views: number;\n  created_at: string;\n  user_email?: string;\n}\n\nexport default function PitchesPage() {\n  const router = useRouter();\n  const { data: session } = useSession();\n  const [pitches, setPitches] = useState<Pitch[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [viewedPitches, setViewedPitches] = useState<Set<string>>(new Set());\n  const [playingVideos, setPlayingVideos] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    fetchPitches();\n  }, []);\n\n  const fetchPitches = async () => {\n    try {\n      const response = await fetch('/api/pitches');\n      if (!response.ok) {\n        throw new Error('Failed to fetch pitches');\n      }\n      const data = await response.json();\n      setPitches(data);\n    } catch (err) {\n      setError('Failed to load pitches. Please try again.');\n      console.error('Error fetching pitches:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const incrementViewCount = async (pitchId: string) => {\n    // Only increment if the user is an investor and hasn't viewed this pitch yet\n    if (session?.user?.userType === 'investor' && !viewedPitches.has(pitchId)) {\n      try {\n        const response = await fetch(`/api/pitches/${pitchId}/views`, {\n          method: 'POST',\n        });\n\n        if (response.ok) {\n          const { views } = await response.json();\n          // Update the pitch's view count in the local state\n          setPitches(prevPitches =>\n            prevPitches.map(pitch =>\n              pitch.id === pitchId ? { ...pitch, views } : pitch\n            )\n          );\n          // Mark this pitch as viewed\n          setViewedPitches(prev => new Set([...prev, pitchId]));\n        }\n      } catch (err) {\n        console.error('Error incrementing view count:', err);\n      }\n    }\n  };\n\n  const handleVideoPlay = (pitchId: string) => {\n    setPlayingVideos(prev => new Set([...prev, pitchId]));\n    incrementViewCount(pitchId);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  const isEntrepreneur = session?.user?.userType === 'entrepreneur';\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold\">\n          {isEntrepreneur ? 'My Pitches' : 'All Pitches'}\n        </h1>\n        {isEntrepreneur && (\n          <Link\n            href=\"/pitches/new\"\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n          >\n            Create New Pitch\n          </Link>\n        )}\n      </div>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n\n      {pitches.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">\n            {isEntrepreneur \n              ? \"You haven't created any pitches yet.\"\n              : \"No pitches available at the moment.\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {pitches.map((pitch) => (\n            <div\n              key={pitch.id}\n              className=\"border rounded-lg p-6 hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex justify-between items-start mb-2\">\n                <h2 className=\"text-xl font-semibold\">{pitch.title}</h2>\n                {!isEntrepreneur && pitch.user_email && (\n                  <span className=\"text-sm text-gray-500\">\n                    By: {pitch.user_email}\n                  </span>\n                )}\n              </div>\n              \n              <div className=\"aspect-w-16 aspect-h-9 mb-4 relative\">\n                {!playingVideos.has(pitch.id) && (\n                  <div \n                    className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 cursor-pointer hover:bg-opacity-40 transition-opacity\"\n                    onClick={() => handleVideoPlay(pitch.id)}\n                  >\n                    <Play className=\"w-16 h-16 text-white\" />\n                  </div>\n                )}\n                <iframe\n                  src={`${pitch.video_url}?autoplay=${playingVideos.has(pitch.id) ? '1' : '0'}`}\n                  className=\"w-full h-full rounded-lg\"\n                  allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                ></iframe>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"font-medium text-gray-700\">Description</h3>\n                  <p className=\"text-gray-600\">{pitch.description}</p>\n                </div>\n\n                <div>\n                  <h3 className=\"font-medium text-gray-700\">Looking For</h3>\n                  <p className=\"text-gray-600\">{pitch.looking_for}</p>\n                </div>\n\n                <div className=\"flex justify-between text-sm text-gray-500\">\n                  <span>{pitch.views} views</span>\n                  <span>\n                    Created on {new Date(pitch.created_at).toLocaleDateString()}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///Users/gayatrivohra/Downloads/EntreprenuershipWithoutAnAddress-main/Add-Navbar-Link/site/entrepreneurship-without-address/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"file":"play.js","sources":["file:///Users/gayatrivohra/Downloads/EntreprenuershipWithoutAnAddress-main/Add-Navbar-Link/site/entrepreneurship-without-address/node_modules/lucide-react/src/icons/play.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }]];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('Play', __iconNode);\n\nexport default Play;\n"],"names":[],"mappings":";;;;;;;;;;;AAGa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,UAAA,CAAuB,CAAA,CAAA;IAAC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAW;QAAA,CAAE;YAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAsB;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK,CAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAC;KAAC;CAAA,CAAA;AAa3F,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAO,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}